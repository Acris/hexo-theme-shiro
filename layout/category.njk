{% extends "_layout.njk" %}
{% import "_macro/ui.njk" as ui %}

{% block content %}
<section class="max-w-3xl mx-auto">
    <header class="text-center mb-10">
        <h1 class="font-bold text-[1.8rem] sm:text-[2rem] md:text-[2.2rem] leading-snug text-slate-900">
            {% if is_category() and page.category %}
            {{ __('menu.categories') }}: {{ page.category }}
            {% else %}
            {{ __('menu.categories') }}
            {% endif %}
        </h1>
        {{ ui.divider() }}
    </header>

    {% if is_category() %}
        {% import "_macro/archive.njk" as archive with context %}
        {% set cat = site.categories.findOne({name: page.category}) %}
        {% if cat and cat.posts.length > 0 %}
            {{ archive.render_list(cat.posts.sort('date', -1)) }}
        {% else %}
            {% include "_partial/common/empty.njk" %}
        {% endif %}
    {% else %}
        {% if site.categories.length > 0 %}
            <div class="space-y-16 max-w-2xl mx-auto">
                {% for cat in site.categories.toArray() %}
                <div id="cat-{{ cat.name }}" class="scroll-mt-24">
                    <h2 class="flex items-center gap-2 text-xl font-bold text-slate-800 mb-6 pb-2 border-b border-slate-100">
                        {{ ui.icon_folder() }}
                        {{ cat.name }}
                    </h2>
                    <div class="space-y-4">
                        {% for post in cat.posts.toArray() %}
                        <article class="flex items-baseline gap-6 group">
                            <time datetime="{{ date(post.date, 'YYYY-MM-DD') }}" class="flex-shrink-0 text-sm font-medium text-slate-400 w-12 text-right num">
                                {{ date(post.date, 'MM-DD') }}
                            </time>
                            <h3 class="text-base font-normal text-slate-700 hover:text-slate-900 transition-colors">
                                <a href="{{ url_for(post.path) }}" class="hover:underline decoration-slate-300 underline-offset-4">{{ post.title }}</a>
                            </h3>
                        </article>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            {% include "_partial/common/empty.njk" %}
        {% endif %}
    {% endif %}
</section>
{% endblock %}
